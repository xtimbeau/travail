<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="fr" xml:lang="fr"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.9.13">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Xavier Timbeau">

<title>Installing packages – Partage de la valeur ajoutée, comparaisons internationales</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../../../../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../../../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../../../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../../../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../../../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../../../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../../../../../">
<link href="../../../../../../../www/fofce.png" rel="icon" type="image/png">
<script src="../../../../../../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../../../../../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../../../../../../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../../../../../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../../../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../../../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../../../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../../../../../site_libs/quarto-html/quarto-syntax-highlighting-55204c15e214935f5512e1d46ffc1259.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../../../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../../../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../../../../../site_libs/bootstrap/bootstrap-6c2e0ee8c1c0088e18264816ff7b29fd.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="../../../../../../../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../../../../../../../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../../../../../../../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Pas de résultats",
    "search-matching-documents-text": "documents trouvés",
    "search-copy-link-title": "Copier le lien vers la recherche",
    "search-hide-matches-text": "Cacher les correspondances additionnelles",
    "search-more-match-text": "correspondance de plus dans ce document",
    "search-more-matches-text": "correspondances de plus dans ce document",
    "search-clear-button-title": "Effacer",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Annuler",
    "search-submit-button-title": "Envoyer",
    "search-label": "Recherche"
  }
}</script>
<script async="" src="https://hypothes.is/embed.js"></script>
<script>
  window.document.addEventListener("DOMContentLoaded", function (_event) {
    document.body.classList.add('hypothesis-enabled');
  });
</script>


<meta name="citation_title" content="Installing packages">
<meta name="citation_author" content="Xavier Timbeau">
<meta name="citation_publication_date" content="2025-10-24">
<meta name="citation_cover_date" content="2025-10-24">
<meta name="citation_year" content="2025">
<meta name="citation_online_date" content="2025-10-24">
<meta name="citation_fulltext_html_url" content="https://xtimbeau.github.io/travail/renv/library/macos/R-4.5/aarch64-apple-darwin20/renv/doc/package-install.html">
<meta name="citation_language" content="fr">
<meta name="citation_reference" content="citation_title=The Missing Profits of Nations;,citation_author=Thomas Tørsløv;,citation_author=Ludvig Wier;,citation_author=Gabriel Zucman;,citation_publication_date=2022-07-26;,citation_cover_date=2022-07-26;,citation_year=2022;,citation_fulltext_html_url=http://dx.doi.org/10.1093/restud/rdac049;,citation_issue=3;,citation_doi=10.1093/restud/rdac049;,citation_volume=90;,citation_language=en;,citation_journal_title=The Review of Economic Studies;">
<meta name="citation_reference" content="citation_title=Politiques sociales&nbsp;: L’état des savoirs;,citation_author=Léa Lima;,citation_author=Carole Tuchszirer;,citation_publication_date=2022-02-24;,citation_cover_date=2022-02-24;,citation_year=2022;,citation_fulltext_html_url=http://dx.doi.org/10.3917/dec.girau.2022.01.0045;,citation_doi=10.3917/dec.girau.2022.01.0045;,citation_inbook_title=undefined;">
<meta name="citation_reference" content="citation_title=Quarante ans d’analyse du travail et de l’emploi&nbsp;: Points de vue de quatre économistes;,citation_author=Philippe Askenazy;,citation_author=Luc Behaghel;,citation_author=Morgane Laouenan;,citation_author=Dominique Meurs;,citation_publication_date=2019-10-02;,citation_cover_date=2019-10-02;,citation_year=2019;,citation_fulltext_html_url=http://dx.doi.org/10.4000/travailemploi.9068;,citation_issue=158;,citation_doi=10.4000/travailemploi.9068;,citation_journal_title=Travail et emploi;">
<meta name="citation_reference" content="citation_title=Partage de la valeur ajoutée, partage des profits et écarts de rémunérations en france;,citation_author=Jean-Philippe Cotis;,citation_publication_date=2009-05-13;,citation_cover_date=2009-05-13;,citation_year=2009;,citation_fulltext_html_url=https://www.vie-publique.fr/rapport/30455-partage-valeur-ajoutee-partage-profits-et-ecarts-de-remuneration;,citation_technical_report_institution=Rapport pour la Présidence de la République Française;">
<meta name="citation_reference" content="citation_title=Le partage de la valeur ajoutée;,citation_author=Philippe Askenazy;,citation_author=Gilbert Cette;,citation_author=Arnaud Sylvain;,citation_publication_date=2011-03-01;,citation_cover_date=2011-03-01;,citation_year=2011;,citation_fulltext_html_url=http://dx.doi.org/10.3917/dec.asken.2011.01;,citation_doi=10.3917/dec.asken.2011.01;,citation_journal_title=Repères, La Découverte;">
<meta name="citation_reference" content="citation_title=The future of european competitiveness – a competitiveness strategy for europe;,citation_author=Mario Draghi;,citation_publication_date=2024-09-09;,citation_cover_date=2024-09-09;,citation_year=2024;,citation_fulltext_html_url=https://commission.europa.eu/topics/strengthening-european-competitiveness/eu-competitiveness-looking-ahead_en#paragraph_47059;,citation_technical_report_institution=Commission Européenne/European Commission;">
<meta name="citation_reference" content="citation_title=La transition écologique en europe : Tenir le cap;,citation_author=Anne Epaulard;,citation_author=Paul Malliet;,citation_author=Anissa Saumtally;,citation_author=Xavier Timbeau;,citation_publication_date=2024-06-21;,citation_cover_date=2024-06-21;,citation_year=2024;,citation_fulltext_html_url=https://www.ofce.sciences-po.fr/pdf/pbrief/2024/OFCEpbrief131.pdf;,citation_issue=131;,citation_journal_title=Policy Brief de l’OFCE;">
<meta name="citation_reference" content="citation_title=Trois décennies de réformes fiscales en france;,citation_author=Xavier Timbeau;,citation_publication_date=2022;,citation_cover_date=2022;,citation_year=2022;,citation_fulltext_html_url=https://shs.cairn.info/revue-l-economie-politique-2022-4-page-8?lang=fr;,citation_issue=96;,citation_journal_title=Economie Politique;">
<meta name="citation_reference" content="citation_title=7. Le partage de la valeur ajoutée&nbsp;n’a pas encore dévoilé tous ses mystères;,citation_author=Sophie Piton;,citation_publication_date=2019-12-20;,citation_cover_date=2019-12-20;,citation_year=2019;,citation_fulltext_html_url=http://dx.doi.org/10.3917/rce.024.0131;,citation_issue=1;,citation_doi=10.3917/rce.024.0131;,citation_volume=n° 24;,citation_journal_title=Regards croisés sur l’économie;">
<meta name="citation_reference" content="citation_title=Le partage de la valeur ajoutée;,citation_author=Philippe Askenazy;,citation_author=Gilbert Cette;,citation_author=Arnaud Sylvain;,citation_publication_date=2012-09-01;,citation_cover_date=2012-09-01;,citation_year=2012;,citation_fulltext_html_url=http://dx.doi.org/10.3917/dec.asken.2012.01;,citation_doi=10.3917/dec.asken.2012.01;,citation_journal_title=Repères;">
<meta name="citation_reference" content="citation_title=Le partage de la valeur ajoutée en France;,citation_author=Xavier Timbeau;,citation_publication_date=2002;,citation_cover_date=2002;,citation_year=2002;,citation_fulltext_html_url=http://dx.doi.org/10.3917/reof.080.0063;,citation_issue=1;,citation_doi=10.3917/reof.080.0063;,citation_volume=80;,citation_language=fr;,citation_journal_title=Revue de l’OFCE;">
<meta name="citation_reference" content="citation_title=Quelles marges de manœuvre pour revaloriser le travail ?;,citation_author=Xavier Timbeau;,citation_publication_date=2025;,citation_cover_date=2025;,citation_year=2025;,citation_fulltext_html_url=https://shs.cairn.info/revue-l-economie-politique-2025-1-page-64?lang=fr;,citation_issue=1;,citation_volume=105;,citation_language=fr;,citation_journal_title=Economie Politique;">
<meta name="citation_reference" content="citation_title=Le partage de la valeur ajoutée en europe;,citation_author=Michel Husson;,citation_publication_date=2010-03-01;,citation_cover_date=2010-03-01;,citation_year=2010;,citation_fulltext_html_url=http://dx.doi.org/10.3917/rdli.064.0047;,citation_issue=1;,citation_doi=10.3917/rdli.064.0047;,citation_volume=n° 64;,citation_journal_title=La Revue de l’Ires;">
<meta name="citation_reference" content="citation_title=Le partage de la valeur ajoutée dans le cycle;,citation_author=Christophe Hurlin;,citation_author=Franck Portier;,citation_publication_date=1996;,citation_cover_date=1996;,citation_year=1996;,citation_fulltext_html_url=http://dx.doi.org/10.3406/ecop.1996.5809;,citation_issue=4;,citation_doi=10.3406/ecop.1996.5809;,citation_volume=125;,citation_language=fr;,citation_journal_title=Économie &amp;amp;amp; prévision;">
<meta name="citation_reference" content="citation_title=Which r-star, public bonds or private investment? Measurement and policy implications.;,citation_author=Ricardo Reis;,citation_publication_date=2022-09;,citation_cover_date=2022-09;,citation_year=2022;,citation_fulltext_html_url=https://personal.lse.ac.uk/reisr/papers/99-ampf.pdf;,citation_language=en;">
<meta name="citation_reference" content="citation_title=La part du travail sur le long terme : un déclin ?;,citation_author=Gilbert Cette;,citation_author=Lorraine Koehl;,citation_author=Thomas Philippon;,citation_publication_date=2019-12-01;,citation_cover_date=2019-12-01;,citation_year=2019;,citation_fulltext_html_url=https://www.insee.fr/en/statistiques/4253023?sommaire=4253180;,citation_issue=510‑511‑512;,citation_doi=10.24187/ecostat.2019.510t.1993;,citation_language=fr;,citation_journal_title=Economie et Statistique / Economics and Statistics;">
<meta name="citation_reference" content="citation_title=La part du travail sur le long terme : un déclin ?;,citation_author=Mathilde Pak;,citation_author=Pierre-Alain Pionnier;,citation_author=Cyrille Schwellnus;,citation_publication_date=2019-12-01;,citation_cover_date=2019-12-01;,citation_year=2019;,citation_fulltext_html_url=https://www.insee.fr/fr/statistiques/4253015?sommaire=4253159;,citation_issue=510‑511‑512;,citation_doi=10.24187/ecostat.2019.510t.1993;,citation_language=fr;,citation_journal_title=Economie et Statistique / Economics and Statistics;">
<meta name="citation_reference" content="citation_title=Le partage de la richesse produite en France entre le travail et le capital;,citation_author=Charles Gendre;,citation_author=Yann Thommen;,citation_publication_date=2025-05-01;,citation_cover_date=2025-05-01;,citation_year=2025;,citation_fulltext_html_url=https://www.tresor.economie.gouv.fr/Articles/b72e151f-ac09-47e6-92eb-30657fce5e46/files/9a8f51d9-a060-4547-8852-b630858d7565;,citation_issue=363;,citation_language=fr;,citation_journal_title=Trésor-Éco;">
<meta name="citation_reference" content="citation_title=Réformer la fiscalité du patrimoine&nbsp;?;,citation_author=Guillaume Allègre;,citation_author=Mathieu Plane;,citation_author=Xavier Timbeau;,citation_publication_date=2012-07-01;,citation_cover_date=2012-07-01;,citation_year=2012;,citation_fulltext_html_url=http://dx.doi.org/10.3917/reof.122.0231;,citation_issue=3;,citation_doi=10.3917/reof.122.0231;,citation_volume=n° 122;,citation_journal_title=Revue de l’OFCE;">
<meta name="citation_reference" content="citation_title=Théorie de la régulation. Un nouvel état des savoirs;,citation_abstract=Constituée dans les années 1970 à partir des pensées marxistes et keynésiennes, la théorie de la régulation est devenue une approche économique cruciale qui offre une alternative robuste à la théorie néoclassique. Depuis l’« état des savoirs » publié en 1995, la théorie de la régulation a beaucoup évolué. Elle n’est plus seulement identifiée à une recherche de type macroéconomique (modes de régulation des économies nationales et du capitalisme mondial). Elle traite aussi désormais des entreprises et de champs sectoriels classiques (automobile, agroalimentaire…) comme plus originaux (éducation, santé, ESS, RSE…) ainsi que de problématiques transversales fondamentales (écologie, genre, connaissances…). Faisant intervenir une centaine d’universitaires spécialistes de divers champs de la socio-économie et prenant en compte cette extension des champs de recherche régulationnistes, cet ouvrage s’impose comme le « nouvel état des savoirs ». Il sera un outil de travail efficace et durable pour la communauté étudiante – du master au doctorat – comme pour les chercheurs et chercheuses avancées et constituera une référence pour intégrer les transformations structurelles de la société à une économie politique renouvelée.;,citation_author=Robert Boyer;,citation_author=Jean-Pierre Chanteau;,citation_author=Agnès Labrousse;,citation_author=Thomas Lamarche;,citation_publication_date=2023;,citation_cover_date=2023;,citation_year=2023;,citation_fulltext_html_url=https://shs.cairn.info/theorie-de-la-regulation--9782100840571?lang=fr;,citation_doi=10.3917/dunod.boyer.2023.01;,citation_isbn=978-2-10-084057-1;,citation_series_title=Éco Sup;">
<meta name="citation_reference" content="citation_title=Théorie de la régulation, l’état des savoirs;,citation_abstract=Pourquoi les « miracles économiques » d’hier sont-ils entrés en crise ? Si toutes les économies obéissent au même modèle, comment expliquer la diversité des trajectoires américaine, européenne et japonaise ? L’État-nation, détrôné par les forces du marché, a-t-il perdu tout pouvoir ? Faut-il anticiper l’émergence de régulations supranationales ? Pourquoi est-il si difficile, en Russie, d’implanter les institutions fondatrices d’une économie moderne ? La victoire des politiques économiques de « retour au marché » est-elle réversible ? Autant de mystères pour nombre de théories économiques que vise à éclairer la théorie de la régulation : chaque économie a la conjoncture et les crises de sa structure. Or ces structures varient dans le temps et dans l’espace. Pour en rendre compte, cette théorie a élaboré un ensemble de concepts, de méthodes et de modèles en symbiose avec les enseignements de l’histoire longue et d’études comparatives systématiques. Née au début des années soixante-dix avec l’analyse du fordisme et de sa crise, la théorie de la régulation n’a cessé depuis lors de se développer dans de nouvelles directions : théorie de l’État, de la monnaie, formalisations macroéconomiques de divers régimes de croissance, analyses sectorielles, prospective des alternatives au fordisme, enfin contribution à une théorie générale des institutions. Cet ouvrage propose un panorama complet et actualisé de tous ces développements : sur chaque thème, un article concis présente les concepts de base, les principaux résultats et les directions actuelles de la recherche. Fruit du travail d’une quarantaine de spécialistes de diverses disciplines et divers pays, cet ouvrage de référence sera utile aussi bien aux étudiants qu’aux enseignants et aux chercheurs.;,citation_author=Robert Boyer;,citation_author=Yves Saillard;,citation_publication_date=2002;,citation_cover_date=2002;,citation_year=2002;,citation_fulltext_html_url=https://shs.cairn.info/theorie-de-la-regulation-l-etat-des-savoirs--9782707137654?lang=fr;,citation_doi=10.3917/dec.boyer.2002.01;,citation_isbn=978-2-7071-3765-4;,citation_volume=2e éd.;,citation_series_title=Recherches;">
<meta name="citation_reference" content="citation_title=Une vision après dépréciation du compte des sociétés non financières;,citation_author=Pierre Sicsic;,citation_publication_date=2018-04-11;,citation_cover_date=2018-04-11;,citation_year=2018;,citation_fulltext_html_url=https://www.banque-france.fr/fr/publications-et-statistiques/publications/une-vision-apres-depreciation-du-compte-des-societes-non;,citation_journal_title=Bloc-notes Eco, Banque de France;,citation_publisher=Banque de France;">
<meta name="citation_reference" content="citation_title=Quel est vraiment le poids de l’industrie en france et en allemagne ?;,citation_author=Sylvain Larieu;,citation_publication_date=2024-07-12;,citation_cover_date=2024-07-12;,citation_year=2024;,citation_fulltext_html_url=https://blog.insee.fr/combien-pese-l-industrie-en-france-et-en-allemagne/);,citation_journal_title=Le Blog de l’INSEE;,citation_publisher=INSEE;">
</head>

<body class="floating nav-fixed slimcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="https://www.ofce.fr/" class="navbar-brand navbar-brand-logo">
    <img src="../../../../../../../www/ofce_m.png" alt="OFCE" class="navbar-logo light-content">
    <img src="../../../../../../../www/ofce_m.png" alt="OFCE" class="navbar-logo dark-content">
    </a>
  </div>
            <div id="quarto-search" class="" title="Recherche"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Basculer la navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../../../../../index.html"> <i class="bi bi-house" role="img">
</i> 
<span class="menu-text">wp 2025-23</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../../../../../annexes.html"> <i class="bi bi-file-bar-graph" role="img">
</i> 
<span class="menu-text">Annexes</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../../../../../NEWS.html"> <i class="bi bi-newspaper" role="img">
</i> 
<span class="menu-text">Historique</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../../../../../about.html"> <i class="bi bi-person-circle" role="img">
</i> 
<span class="menu-text"> </span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://github.com/xtimbeau/travail"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"> </span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
  <a href="index.html">
   <p class="wp">
          Document de travail<br>de l'
      <img src="_extensions/ofce/wp/ofce_m.png" width="30" height="15" style="margin:0px -4px">
      &nbsp;n°2025-23</p>
      
  </a>
    <h2 id="toc-title">Sur cette page</h2>
    <ul>
    <li><a href="#cache" id="toc-cache" class="nav-link active" data-scroll-target="#cache"><span class="header-section-number">1</span> Cache</a>
    <ul class="collapse">
    <li><a href="#cache-location" id="toc-cache-location" class="nav-link" data-scroll-target="#cache-location"><span class="header-section-number">1.1</span> Cache location</a></li>
    <li><a href="#multiple-caches" id="toc-multiple-caches" class="nav-link" data-scroll-target="#multiple-caches"><span class="header-section-number">1.2</span> Multiple caches</a></li>
    <li><a href="#shared-cache-locations" id="toc-shared-cache-locations" class="nav-link" data-scroll-target="#shared-cache-locations"><span class="header-section-number">1.3</span> Shared cache locations</a></li>
    <li><a href="#caveats" id="toc-caveats" class="nav-link" data-scroll-target="#caveats"><span class="header-section-number">1.4</span> Caveats</a></li>
    </ul></li>
    <li><a href="#building-from-source" id="toc-building-from-source" class="nav-link" data-scroll-target="#building-from-source"><span class="header-section-number">2</span> Building from source</a>
    <ul class="collapse">
    <li><a href="#configure-flags" id="toc-configure-flags" class="nav-link" data-scroll-target="#configure-flags"><span class="header-section-number">2.1</span> Configure flags</a></li>
    <li><a href="#install-flags" id="toc-install-flags" class="nav-link" data-scroll-target="#install-flags"><span class="header-section-number">2.2</span> Install flags</a></li>
    <li><a href="#vignettes" id="toc-vignettes" class="nav-link" data-scroll-target="#vignettes"><span class="header-section-number">2.3</span> Vignettes</a></li>
    </ul></li>
    <li><a href="#downloads" id="toc-downloads" class="nav-link" data-scroll-target="#downloads"><span class="header-section-number">3</span> Downloads</a>
    <ul class="collapse">
    <li><a href="#alternative-downloaders" id="toc-alternative-downloaders" class="nav-link" data-scroll-target="#alternative-downloaders"><span class="header-section-number">3.1</span> Alternative downloaders</a></li>
    <li><a href="#proxies" id="toc-proxies" class="nav-link" data-scroll-target="#proxies"><span class="header-section-number">3.2</span> Proxies</a></li>
    <li><a href="#authentication" id="toc-authentication" class="nav-link" data-scroll-target="#authentication"><span class="header-section-number">3.3</span> Authentication</a></li>
    <li><a href="#custom-headers" id="toc-custom-headers" class="nav-link" data-scroll-target="#custom-headers"><span class="header-section-number">3.4</span> Custom headers</a></li>
    <li><a href="#debugging" id="toc-debugging" class="nav-link" data-scroll-target="#debugging"><span class="header-section-number">3.5</span> Debugging</a></li>
    </ul></li>
    </ul>
<div class="quarto-other-links"><h2>Autres contenus</h2><ul><li><a href="annexes.html"><i class="bi bi-file-bar-graph"></i>Annexes</a></li><li><a href="NEWS.html"><i class="bi bi-newspaper"></i>Historique des changements</a></li><li><a href="seminaire_lunch_OFCE.html"><i class="bi bi-file-earmark-easel"></i>Séminaire Lunch OFCE</a></li><li><a href="seminaire_IRES_OFCE.html"><i class="bi bi-file-earmark-easel"></i>Séminaire IRES-OFCE</a></li><li><a href="https://www.ofce.sciences-po.fr/blog2024/fr/2025/20251128_XT/"><i class="bi bi-pen"></i>Post sur le blog de l'OFCE</a></li></ul></div></nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
  <div class="quarto-title">
        <h1 class="title">Installing packages</h1>
        
      </div>

  
  
    <details class="details-box">
      <summary class="quarto-title-meta-heading"><b>Autrices, auteurs &amp; résumé</b></summary>

          <div class="quarto-title-meta-author">
        <div class="quarto-title-meta-heading">Par</div>
        <div class="quarto-title-meta-heading">Affiliation</div>

              <div class="quarto-title-meta-contents">
          <span class="author">Xavier Timbeau <a href="mailto:xavier.timbeau@sciencespo.fr" class="quarto-title-author-email"><i class="bi bi-envelope"></i></a> <a href="https://orcid.org/0000-0002-6198-5953" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a></span>
        </div>

              <div class="quarto-title-meta-contents">
                  <p class="affiliation">
                      <a href="http://www.ofce.fr">
                      OFCE, Sciences Po Paris
                      </a>
                    </p>
                </div>
                  </div>
      
            
      <div class="quarto-title-meta">
              <div>
          <div class="quarto-title-meta-heading">Publié le</div>
          <div class="quarto-title-meta-contents">
            <p class="date">24 octobre 2025</p>
          </div>
        </div>
        
              <div>
          <div class="quarto-title-meta-heading">Modifié le</div>
          <div class="quarto-title-meta-contents">
            <p class="date-modified">16 décembre 2025</p>
          </div>
        </div>
        
        
        
        
            </div>

      
        </details>

</header>


<p>Package installation is an important part of renv. This vignette gives you the details, starting with an overview of renv’s cache, before going into various installation challenges around building from source and downloading with proxies or authentication.</p>
<section id="cache" class="level2 page-columns page-full" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="cache"><span class="header-section-number">1</span> Cache</h2>
<p>One of renv’s primary features is the global package cache, which shared across all projects. The renv package cache provides two primary benefits:</p>
<ol type="1">
<li><p>Installing and restoring packages is much faster, as renv can find and re-use previously installed packages from the cache.</p></li>
<li><p>Projects take up less disk space, because each project doesn’t need to contain it’s own copy of every package.</p></li>
</ol>
<p>When installing a package, renv installs into the global cache and then adds a symlink<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> to that directory in the project library. That way each renv project remains isolated from other projects on your system, but they can still re-use the same installed packages.</p>
<div class="no-row-height column-margin column-container"><div id="fn1"><p><sup>1</sup>&nbsp;Or junction points, on Windows. Junction points are unfortunately not supported on Windows network shares; see <a href="https://learn.microsoft.com/en-us/windows/win32/fileio/hard-links-and-junctions">Hard links and junctions</a> for more details.</p></div></div><p>The process by which packages enter the cache is roughly as follows:</p>
<ol type="1">
<li><p>Package installation is requested via e.g.&nbsp;<code>install.packages()</code>, or <code>renv::install()</code>, or as part of <code>renv::restore()</code>.</p></li>
<li><p>If renv is able to find the requested version of the package in the cache, then that package is linked into the project library, and installation is complete.</p></li>
<li><p>Otherwise, the package is downloaded and installed into the project library.</p></li>
<li><p>After installation of the package has successfully completed, the package is then copied into the global package cache, and then symlinked into the project library.</p></li>
</ol>
<p>In some cases, renv will be unable to directly link from the global package cache to your project library, e.g.&nbsp;if the package cache and your project library live on different disk volumes. In such a case, renv will instead copy the package from the cache into the project library. This is much slower, so is worth avoiding.</p>
<section id="cache-location" class="level3" data-number="1.1">
<h3 data-number="1.1" class="anchored" data-anchor-id="cache-location"><span class="header-section-number">1.1</span> Cache location</h3>
<p>You can find the location of the current cache with <code>renv::paths$cache()</code>. By default, it will be in one of the following folders:</p>
<ul>
<li>Linux: <code>~/.cache/R/renv/cache</code></li>
<li>macOS: <code>~/Library/Caches/org.R-project.R/R/renv/cache</code></li>
<li>Windows: <code>%LOCALAPPDATA%/renv/cache</code></li>
</ul>
<p>If you’d like to share the package cache across multiple users, you can do so by setting the <code>RENV_PATHS_CACHE</code> environment variable to a shared path. This variable should be set in an R startup file to make it apply to all R sessions. While you can set it in a project-local <code>.Renviron</code>, or the user-level <code>~/.Renviron</code>, we generally recommend using the R installation’s site-wide <code>Renviron.site</code> if you’d like to ensure the same cache path is visible to all users of R on a system.</p>
<p>You may also want to set <code>RENV_PATHS_CACHE</code> so that the global package cache can be stored on the same volume as the projects you normally work on. This is especially important when working projects stored on a networked filesystem.</p>
</section>
<section id="multiple-caches" class="level3" data-number="1.2">
<h3 data-number="1.2" class="anchored" data-anchor-id="multiple-caches"><span class="header-section-number">1.2</span> Multiple caches</h3>
<p>It is also possible to configure renv to use multiple cache locations. For example, you might want to make both a user-local package cache, as well as a global administrator-managed cache, visible within an renv project. To do so, you can specify the paths to the cache separated with a <code>;</code> (or <code>:</code> on Unix if preferred). For example:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="va">RENV_PATHS_CACHE</span><span class="op">=</span>/path/to/local/cache<span class="kw">;</span><span class="ex">/path/to/global/cache</span></span></code></pre></div><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></div>
<p>In such a case, renv will iterate over the cache locations in order when trying to find a package, and newly-installed packages will enter the first writable cache path listed in <code>RENV_PATHS_CACHE</code>.</p>
</section>
<section id="shared-cache-locations" class="level3" data-number="1.3">
<h3 data-number="1.3" class="anchored" data-anchor-id="shared-cache-locations"><span class="header-section-number">1.3</span> Shared cache locations</h3>
<p>When the renv cache is enabled, if that cache is shared and visible to multiple users, then each of those users will have an opportunity to install packages into the renv cache. However, some care must be taken to ensure that these packages can be used by different users in your environment:</p>
<ol type="1">
<li><p>Packages copied into the cache may have <a href="https://en.wikipedia.org/wiki/Access-control_list">Access-control Lists</a> (ACLs), which might prevent others from using packages that have been installed into the cache. If this is the case, it’s important that ACLs be set (or updated) on cache entries so that the cache is accessible to each user requiring access. When deploying renv in an enterprise environment, the system administrator should take care to ensure ACLs (if any) allow users access to packages within the renv cache.</p></li>
<li><p>By default, packages copied into the cache will remain <span style="white-space:nowrap">« </span>owned<span style="white-space:nowrap"> »</span> by the user that requested installation of that package. If you’d like renv to instead re-assign ownership of the cached package to a separate user account, you can set the <code>RENV_CACHE_USER</code> environment variable. When set, renv will attempt to run <code>chown -R &lt;package&gt; &lt;user&gt;</code> to update cache ownership after the package has been copied into the cache.</p></li>
</ol>
</section>
<section id="caveats" class="level3" data-number="1.4">
<h3 data-number="1.4" class="anchored" data-anchor-id="caveats"><span class="header-section-number">1.4</span> Caveats</h3>
<p>While we recommend enabling the cache by default, if you’re having trouble with it, you can disable it by setting the project setting <code>renv::settings$use.cache(FALSE)</code>. Doing this will ensure that packages are then installed into your project library directly, without attempting to link and use packages from the renv cache.</p>
<p>If you find a problematic package has entered the cache (for example, an installed package has become corrupted), that package can be removed with the <code>renv::purge()</code> function. See the <code>?purge</code> documentation for caveats and things to be aware of when removing packages from the cache.</p>
<p>You can also force a package to be re-installed and re-cached with the following functions:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># restore packages from the lockfile, bypassing the cache</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>renv<span class="sc">::</span><span class="fu">restore</span>(<span class="at">rebuild =</span> <span class="cn">TRUE</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># re-install a package</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>renv<span class="sc">::</span><span class="fu">install</span>(<span class="st">"&lt;package&gt;"</span>, <span class="at">rebuild =</span> <span class="cn">TRUE</span>)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co"># rebuild all packages in the project</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>renv<span class="sc">::</span><span class="fu">rebuild</span>()</span></code></pre></div><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>See each function’s respective documentation for more details.</p>
</section>
</section>
<section id="building-from-source" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="building-from-source"><span class="header-section-number">2</span> Building from source</h2>
<p>Where possible, renv will install package binaries, but sometimes a binary is not available and you have to build from source. Installation from source can be challenging for a few reasons:</p>
<ol type="1">
<li><p>Your system will need to have a compatible compiler toolchain available. In some cases, R packages may depend on C / C++ features that aren’t available in an older system toolchain, especially in some older Linux enterprise environments.</p></li>
<li><p>Your system will need requisite system libraries, as many R packages contain compiled C / C++ code that depend on and link to these packages.</p></li>
</ol>
<!-- TODO: renv::equip() for Linux + macOS; use sysreqsdb -->
<section id="configure-flags" class="level3" data-number="2.1">
<h3 data-number="2.1" class="anchored" data-anchor-id="configure-flags"><span class="header-section-number">2.1</span> Configure flags</h3>
<p>Many <code>R</code> packages have a <code>configure</code> script that needs to be run to prepare the package for installation. Arguments and environment variables can be passed through to those scripts in a manner similar to <code>install.packages()</code>. In particular, the <code>R</code> options <code>configure.args</code> and <code>configure.vars</code> can be used to map package names to their appropriate configuration. For example:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># installation of RNetCDF may require us to set include paths for netcdf</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>configure.args <span class="ot">=</span> <span class="fu">c</span>(<span class="at">RNetCDF =</span> <span class="st">"--with-netcdf-include=/usr/include/udunits2"</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">configure.args =</span> configure.args)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>renv<span class="sc">::</span><span class="fu">install</span>(<span class="st">"RNetCDF"</span>)</span></code></pre></div><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>This could also be specified as, for example,</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">configure.args.RNetCDF =</span> <span class="st">"--with-netcdf-include=/usr/include/udunits2"</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>renv<span class="sc">::</span><span class="fu">install</span>(<span class="st">"RNetCDF"</span>)</span></code></pre></div><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="install-flags" class="level3" data-number="2.2">
<h3 data-number="2.2" class="anchored" data-anchor-id="install-flags"><span class="header-section-number">2.2</span> Install flags</h3>
<p>Similarly, additional flags that should be passed to <code>R CMD INSTALL</code> can be set via the <code>install.opts</code> <code>R</code> option:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># installation of R packages using the Windows Subsystem for Linux</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co"># may require the `--no-lock` flag to be set during install</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">install.opts =</span> <span class="st">"--no-lock"</span>)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>renv<span class="sc">::</span><span class="fu">install</span>(<span class="st">"xml2"</span>)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="co"># alternatively, you can set such options for specific packages with e.g.</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">install.opts =</span> <span class="fu">list</span>(<span class="at">xml2 =</span> <span class="st">"--no-lock"</span>))</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>renv<span class="sc">::</span><span class="fu">install</span>(<span class="st">"xml2"</span>)</span></code></pre></div><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="vignettes" class="level3" data-number="2.3">
<h3 data-number="2.3" class="anchored" data-anchor-id="vignettes"><span class="header-section-number">2.3</span> Vignettes</h3>
<p>renv does not build vignettes when installing a package from source. This is because vignettes often require suggested packages, and installing all suggested packages (particularly from source) can be arduous.</p>
<p>If you want to distribute vignettes for your own packages, we suggest creating your own repository of binaries, either with <a href="https://r-universe.dev/">R Universe</a> (for publicly hosted packages on GitHub), with <a href="https://posit.co/products/enterprise/package-manager/">Posit Package Manager</a>, or with <a href="https://eddelbuettel.github.io/drat/">drat</a>.</p>
</section>
</section>
<section id="downloads" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="downloads"><span class="header-section-number">3</span> Downloads</h2>
<p>By default, renv uses <a href="https://curl.se/">curl</a> for file downloads when available. This allows renv to support a number of download features across multiple versions of R, including:</p>
<ul>
<li>Custom headers (used especially for authentication),</li>
<li>Connection timeouts,</li>
<li>Download retries on transient errors.</li>
</ul>
<p>If <code>curl</code> is not available on your machine, it is highly recommended that you install it. Newer versions of Windows 10 come with a bundled version of <code>curl.exe</code>; other users on Windows can use <code>renv::equip()</code> to download and install a recent copy of <code>curl</code>. Newer versions of macOS come with a bundled version of <code>curl</code> that is adequate for usage with renv, and most Linux package managers have a modern version of <code>curl</code> available in their package repositories. You can also configure which <code>curl</code> executable is used by setting the <code>RENV_CURL_EXECUTABLE</code> environment variable, if necessary.</p>
<p><code>curl</code> downloads can be configured through renv’s configuration <span style="white-space:nowrap">settings –</span> see <code>?renv::config</code> for more details.</p>
<section id="alternative-downloaders" class="level3" data-number="3.1">
<h3 data-number="3.1" class="anchored" data-anchor-id="alternative-downloaders"><span class="header-section-number">3.1</span> Alternative downloaders</h3>
<p>If you’ve already configured R’s downloader and would like to bypass renv’s attempts to use <code>curl</code>, you can use the R option <code>renv.download.override</code>. For example, executing:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">renv.download.override =</span> utils<span class="sc">::</span>download.file)</span></code></pre></div><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>would instruct renv to use R’s own download machinery when attempting to download files from the internet (respecting the R options <code>download.file.method</code> and <code>download.file.extra</code> as appropriate). Advanced users can also provide their own download function, provided its signature matches that of <code>utils::download.file()</code>.</p>
<p>You can also instruct renv to use a different download method by setting the <code>RENV_DOWNLOAD_METHOD</code> environment variable. For example:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># use Windows' internal download machinery</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">Sys.setenv</span>(<span class="at">RENV_DOWNLOAD_METHOD =</span> <span class="st">"wininet"</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co"># use R's bundled libcurl implementation</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="fu">Sys.setenv</span>(<span class="at">RENV_DOWNLOAD_METHOD =</span> <span class="st">"libcurl"</span>)</span></code></pre></div><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>If you find that downloads work outside of renv projects, but not within renv projects, you may need to tell renv to use the same download file method that R has been configured to use. You can check which download method R is currently configured to use with:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getOption</span>(<span class="st">"download.file.method"</span>)</span></code></pre></div><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>And the downloader currently used by renv can be queried with:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>renv<span class="sc">:::</span><span class="fu">renv_download_method</span>()</span></code></pre></div><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>You can force renv to use the same download method as R by setting:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Sys.setenv</span>(<span class="at">RENV_DOWNLOAD_METHOD =</span> <span class="fu">getOption</span>(<span class="st">"download.file.method"</span>))</span></code></pre></div><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>and, if necessary, you could also set this environment variable within e.g.&nbsp;your <code>~/.Renviron</code>, so that it is visible to all R sessions. See <code>?Startup</code> for more details.</p>
<p>Note that other features (e.g.&nbsp;authentication) may not be supported when using an alternative download file <span style="white-space:nowrap">method –</span> you will have to configure the downloader yourself if that is required. See <code>?download.file</code> for more details.</p>
</section>
<section id="proxies" class="level3" data-number="3.2">
<h3 data-number="3.2" class="anchored" data-anchor-id="proxies"><span class="header-section-number">3.2</span> Proxies</h3>
<p>If your downloads need to go through a proxy server, then there are a variety of approaches you can take to make this work:</p>
<ol type="1">
<li><p>Set the <code>http_proxy</code> and / or <code>https_proxy</code> environment variables. These environment variables can contain the full URL to your proxy server, including a username + password if necessary.</p></li>
<li><p>You can use a <code>.curlrc</code> (<code>_curlrc</code> on Windows) to provide information about the proxy server to be used. This file should be placed in your home folder (see <code>Sys.getenv("HOME")</code>, or <code>Sys.getenv("R_USER")</code> on Windows); alternatively, you can set the <code>CURL_HOME</code> environment variable to point to a <span style="white-space:nowrap">custom ‹</span>home› folder to be used by <code>curl</code> when resolving the runtime configuration file. On Windows, you can also place your <code>_curlrc</code> in the same directory where the <code>curl.exe</code> binary is located.</p></li>
</ol>
<p>See the curl documentation on <a href="https://ec.haxx.se/usingcurl/proxies/">proxies</a> and <a href="https://ec.haxx.se/cmdline/configfile.html">config files</a> for more details.</p>
<p>As an <a href="https://github.com/rstudio/renv/issues/146">example</a>, the following <code>_curlrc</code> works when using authentication with NTLM and SSPI on Windows:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb11"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">--proxy</span> <span class="st">"your.proxy.dns:port"</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="ex">--proxy-ntlm</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="ex">--proxy-user</span> <span class="st">":"</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="ex">--insecure</span></span></code></pre></div><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></div>
<p>The <a href="https://cran.r-project.org/package=curl">curl</a> R package also has a helper:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>curl<span class="sc">::</span><span class="fu">ie_get_proxy_for_url</span>()</span></code></pre></div><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>which may be useful when attempting to discover this proxy address.</p>
</section>
<section id="authentication" class="level3" data-number="3.3">
<h3 data-number="3.3" class="anchored" data-anchor-id="authentication"><span class="header-section-number">3.3</span> Authentication</h3>
<p>Your project may make use of packages which are available from remote sources requiring some form of authentication to <span style="white-space:nowrap">access –</span> for example, a GitHub enterprise server. Usually, either a personal access token (PAT) or username + password combination is required for authentication. renv is able to authenticate when downloading from such sources, using the same system as the <a href="https://cran.r-project.org/package=remotes">remotes</a> package. In particular, environment variables are used to record and transfer the required authentication information.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th><strong>Remote Source</strong></th>
<th><strong>Authentication</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>GitHub</td>
<td><code>GITHUB_PAT</code></td>
</tr>
<tr class="even">
<td>GitLab</td>
<td><code>GITLAB_PAT</code></td>
</tr>
<tr class="odd">
<td>Bitbucket</td>
<td><code>BITBUCKET_USER</code> + <code>BITBUCKET_PASSWORD</code></td>
</tr>
<tr class="even">
<td>Git Remotes</td>
<td><code>GIT_PAT</code> / <code>GIT_USER</code> + <code>GIT_PASSWORD</code></td>
</tr>
</tbody>
</table>
<p>These credentials can be stored in e.g.&nbsp;<code>.Renviron</code>, or can be set in your R session through other means as appropriate.</p>
<p>If you require custom authentication for different packages (for example, your project makes use of packages available on different GitHub enterprise servers), you can use the <code>renv.auth</code> R option to provide package-specific authentication settings. <code>renv.auth</code> can either be a a named list associating package names with environment variables, or a function accepting a package name + record, and returning a list of environment variables. For example:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># define a function providing authentication</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">renv.auth =</span> <span class="cf">function</span>(package, record) {</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (package <span class="sc">==</span> <span class="st">"MyPackage"</span>)</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">list</span>(<span class="at">GITHUB_PAT =</span> <span class="st">"&lt;pat&gt;"</span>))</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="co"># use a named list directly</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">renv.auth =</span> <span class="fu">list</span>(</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">MyPackage =</span> <span class="fu">list</span>(<span class="at">GITHUB_PAT =</span> <span class="st">"&lt;pat&gt;"</span>)</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a><span class="co"># alternatively, set package-specific option</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a><span class="co"># as a list</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">renv.auth.MyPackage =</span> <span class="fu">list</span>(<span class="at">GITHUB_PAT =</span> <span class="st">"&lt;pat&gt;"</span>))</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a><span class="co"># as a function</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">renv.auth.MyPackage =</span> <span class="cf">function</span>(record) {</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>   <span class="fu">list</span>(<span class="at">GITHUB_PAT =</span> <span class="st">"&lt;pat&gt;"</span>)</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>For packages installed from Git remotes, renv will attempt to use <code>git</code> from the command line to download and restore the associated package. Hence, it is recommended that authentication is done through SSH keys when possible.</p>
<p>Authentication may be required when resolving a package from a remote specification. If the package name cannot be inferred directly from the remote, it can be supplied with a prefix of the form <code>&lt;package&gt;=</code>. For example, the igraph package on GitHub at <a href="https://github.com/igraph/rigraph" class="uri">https://github.com/igraph/rigraph</a> could be installed with:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>renv<span class="sc">::</span><span class="fu">install</span>(<span class="st">"igraph=igraph/rigraph"</span>)</span></code></pre></div><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<section id="azure-devops" class="level4">
<h4 class="anchored" data-anchor-id="azure-devops">Azure DevOps</h4>
<p>Authentication with Azure DevOps may require credentials to be set in a slightly different way. In particular, you can use:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb15"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ex">GITHUB_USER</span> = <span class="op">&lt;</span>username<span class="op">&gt;</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="ex">GITHUB_PASS</span> = <span class="op">&lt;</span>password<span class="op">&gt;</span></span></code></pre></div><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></div>
<p>replacing <code>&lt;username&gt;</code> and <code>&lt;password&gt;</code> as <span style="white-space:nowrap">appropriate –</span> for example, your password may just be a PAT. See https://github.com/rstudio/renv/issues/1751 for more details.</p>
</section>
<section id="git-and-personal-access-tokens" class="level4">
<h4 class="anchored" data-anchor-id="git-and-personal-access-tokens">Git and Personal Access Tokens</h4>
<p>Rather than username + password, some remote Git repositories might require Personal Access Tokens (PATs) for authentication. Typically, such servers expect authentication credentials where:</p>
<ul>
<li>Your PAT is supplied as the username,</li>
<li>Either an empty response, or the string <code>x-oauth-basic</code>, is provided as the password.</li>
</ul>
<p>To help facilitate this, you can set:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb16"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="ex">GIT_USER</span> = <span class="op">&lt;</span>pat<span class="op">&gt;</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="ex">GIT_PASS</span> = x-oauth-basic</span></code></pre></div><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></div>
<p>in an appropriate startup R file.</p>
</section>
</section>
<section id="custom-headers" class="level3" data-number="3.4">
<h3 data-number="3.4" class="anchored" data-anchor-id="custom-headers"><span class="header-section-number">3.4</span> Custom headers</h3>
<p>If you want to set arbitrary headers when downloading files using renv, you can do so using the <code>renv.download.headers</code> R option. It should be a function that accepts a URL, and returns a named character vector indicating the headers which should be supplied when accessing that URL.</p>
<p>For example, suppose you have a package repository hosted at <code>https://my/repository</code>, and the credentials required to access that repository are stored in the <code>AUTH_HEADER</code> environment variable. You could define <code>renv.download.headers</code> like so:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">renv.download.headers =</span> <span class="cf">function</span>(url) {</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">grepl</span>(<span class="st">"^https://my/repository"</span>, url))</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">c</span>(<span class="at">Authorization =</span> <span class="fu">Sys.getenv</span>(<span class="st">"AUTH_HEADER"</span>)))</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>With the above, renv will set the <code>Authorization</code> header whenever it attempts to download files from the repository at URL <code>https://my/repository</code>.</p>
</section>
<section id="debugging" class="level3" data-number="3.5">
<h3 data-number="3.5" class="anchored" data-anchor-id="debugging"><span class="header-section-number">3.5</span> Debugging</h3>
<p>If having problems with downloads, you can get more debugging information (including raw requests and responses) by setting:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">renv.download.trace =</span> <span class="cn">TRUE</span>) </span></code></pre></div><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></div>
</div>


</section>
</section>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Réutilisation</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/deed.fr">CC BY 4.0</a></div></div></section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@article{timbeau2025,
  author = {Timbeau, Xavier},
  title = {Installing packages},
  date = {2025-10-24},
  url = {https://xtimbeau.github.io/travail/renv/library/macos/R-4.5/aarch64-apple-darwin20/renv/doc/package-install.html},
  langid = {fr}
}
</code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">Veuillez citer ce travail comme suit&nbsp;:</div><div id="ref-timbeau2025" class="csl-entry quarto-appendix-citeas" role="listitem">
Timbeau X. (2025). <span>«&nbsp;<a href="https://xtimbeau.github.io/travail/renv/library/macos/R-4.5/aarch64-apple-darwin20/renv/doc/package-install.html">Installing
packages</a>&nbsp;»</span>,.
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copié");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copié");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/xtimbeau\.github\.io\/travail\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // default icon
            link.classList.add("external");
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p><a href="../../../../../../../www/ccby4.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="../../../../../../../www/ccby4.png" height="16"></a></p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
<p>propulsé par <img src="../../../../../../../www/quarto.png" height="16"></p>
</div>
  </div>
</footer>
<script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","descPosition":"bottom","loop":false,"openEffect":"zoom","selector":".lightbox"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>




</body></html>